# Netlify Configuration
# Deploy frontend only (backend runs separately)

[build]
  base = "frontend"
  # Use a small CI wrapper to compute a valid HTTPS public URL (DEPLOY_PRIME_URL/DEPLOY_URL)
  command = "bash scripts/export-web-ci.sh"
  publish = "dist"
  node_version = "18.17.0"

[dev]
  command = "npm start"
  port = 3000

# Redirect API calls to backend
[[redirects]]
  from = "/api/*"
  to = "http://localhost:8080/:splat"
  status = 200
  force = false

# Environment variables
[env]
  [env.production]
    REACT_APP_API_BASE_URL = "https://matiks-assignment-intern.onrender.com"
  [env.development]
    REACT_APP_API_BASE_URL = "http://localhost:8080"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
